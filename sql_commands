# SQL Commands


# Drop all tables in current DB
EXEC sp_MSforeachtable 'DROP TABLE ?';

# Drop all data in all tables

-- Disable foreign key constraints
EXEC sp_msforeachtable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL';

-- Truncate all tables
EXEC sys.sp_msforeachtable 'DELETE FROM ?';

-- Re-enable foreign key constraints
EXEC sp_msforeachtable 'ALTER TABLE ? CHECK CONSTRAINT ALL';


# Show all table references

SELECT 
    fk.name AS ForeignKey,
    tp.name AS ParentTable,
    tr.name AS ReferencedTable
FROM 
    sys.foreign_keys AS fk
INNER JOIN 
    sys.tables AS tp ON fk.parent_object_id = tp.object_id
INNER JOIN 
    sys.tables AS tr ON fk.referenced_object_id = tr.object_id
WHERE 
    tr.name = 'PersonalDetails';